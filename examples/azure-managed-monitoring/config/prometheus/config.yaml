global:
  scrape_interval: 1m
  scrape_timeout: 10s
  scrape_protocols:
    - OpenMetricsText1.0.0
    - OpenMetricsText0.0.1
    - PrometheusText0.0.4
  evaluation_interval: 1m
scrape_configs:
  - job_name: kube-state-metrics
    honor_timestamps: true
    track_timestamps_staleness: false
    scrape_interval: 30s
    scrape_timeout: 10s
    scrape_protocols:
      - OpenMetricsText1.0.0
      - OpenMetricsText0.0.1
      - PrometheusText0.0.4
    scrape_classic_histograms: true
    metrics_path: /metrics
    scheme: http
    enable_compression: true
    label_limit: 63
    label_name_length_limit: 511
    label_value_length_limit: 1023
    follow_redirects: true
    enable_http2: true
    metric_relabel_configs:
      - source_labels: [__name__]
        separator: ;
        regex: '|kube_job_status_succeeded|kube_job_spec_completions|kube_daemonset_status_desired_number_scheduled|kube_daemonset_status_current_number_scheduled|kube_daemonset_status_number_misscheduled|kube_daemonset_status_number_ready|kube_deployment_status_replicas_ready|kube_pod_container_status_last_terminated_reason|kube_pod_container_status_waiting_reason|kube_pod_container_status_restarts_total|kube_node_status_allocatable|kube_pod_owner|kube_pod_container_resource_requests|kube_pod_status_phase|kube_pod_container_resource_limits|kube_replicaset_owner|kube_resourcequota|kube_namespace_status_phase|kube_node_status_capacity|kube_node_info|kube_pod_info|kube_deployment_spec_replicas|kube_deployment_status_replicas_available|kube_deployment_status_replicas_updated|kube_statefulset_status_replicas_ready|kube_statefulset_status_replicas|kube_statefulset_status_replicas_updated|kube_job_status_start_time|kube_job_status_active|kube_job_failed|kube_horizontalpodautoscaler_status_desired_replicas|kube_horizontalpodautoscaler_status_current_replicas|kube_horizontalpodautoscaler_spec_min_replicas|kube_horizontalpodautoscaler_spec_max_replicas|kubernetes_build_info|kube_node_status_condition|kube_node_spec_taint|kube_pod_container_info|kube_.*_labels|kube_.*_annotations|kube_service_info|kube_pod_container_status_running|kube_pod_container_status_waiting|kube_pod_container_status_terminated|kube_pod_container_state_started|kube_pod_created|kube_pod_start_time|kube_pod_init_container_info|kube_pod_init_container_status_terminated|kube_pod_init_container_status_terminated_reason|kube_pod_init_container_status_ready|kube_pod_init_container_resource_limits|kube_pod_init_container_status_running|kube_pod_init_container_status_waiting|kube_pod_init_container_status_restarts_total|kube_pod_container_status_ready|kube_pod_init_container_*|kube_pod_deletion_timestamp|kube_pod_status_reason|kube_pod_init_container_resource_requests'
        replacement: $1
        action: keep
    http_sd_configs:
      - follow_redirects: false
        enable_http2: false
        refresh_interval: 30s
        url: http://ama-metrics-operator-targets.kube-system.svc.cluster.local/jobs/kube-state-metrics/targets?collector_id=ama-metrics-664c787d8d-g4dd2
  - job_name: podMonitor/default/kaap-bookkeeper-pod-monitor/0
    honor_timestamps: true
    track_timestamps_staleness: false
    scrape_interval: 10s
    scrape_timeout: 10s
    scrape_protocols:
      - OpenMetricsText1.0.0
      - OpenMetricsText0.0.1
      - PrometheusText0.0.4
    scrape_classic_histograms: true
    metrics_path: metrics
    scheme: http
    enable_compression: true
    label_limit: 63
    label_name_length_limit: 511
    label_value_length_limit: 1023
    follow_redirects: true
    enable_http2: true
    relabel_configs:
      - source_labels: [job]
        separator: ;
        target_label: __tmp_prometheus_job_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_phase]
        separator: ;
        regex: (Failed|Succeeded)
        replacement: $1
        action: drop
      - source_labels: [__meta_kubernetes_pod_label_app, __meta_kubernetes_pod_labelpresent_app]
        separator: ;
        regex: (pulsar);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_cluster, __meta_kubernetes_pod_labelpresent_cluster]
        separator: ;
        regex: (pulsar);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_component, __meta_kubernetes_pod_labelpresent_component]
        separator: ;
        regex: (bookkeeper);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_container_port_number]
        separator: ;
        regex: "8000"
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_container_name]
        separator: ;
        target_label: container
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: pod
        replacement: $1
        action: replace
      - separator: ;
        target_label: job
        replacement: default/kaap-bookkeeper-pod-monitor
        action: replace
      - separator: ;
        target_label: endpoint
        replacement: "8000"
        action: replace
      - separator: ;
        regex: __meta_kubernetes_pod_label_(.+)
        replacement: $1
        action: labelmap
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: kubernetes_namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_component]
        separator: ;
        target_label: job
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: kubernetes_pod_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: instance
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_component]
        separator: ;
        target_label: application
        replacement: $1
        action: replace
      - source_labels: [__address__]
        separator: ;
        modulus: 1
        target_label: __tmp_hash
        replacement: $1
        action: hashmod
      - source_labels: [__tmp_hash]
        separator: ;
        regex: "0"
        replacement: $1
        action: keep
    http_sd_configs:
      - follow_redirects: false
        enable_http2: false
        refresh_interval: 30s
        url: http://ama-metrics-operator-targets.kube-system.svc.cluster.local/jobs/podMonitor%2Fdefault%2Fkaap-bookkeeper-pod-monitor%2F0/targets?collector_id=ama-metrics-664c787d8d-g4dd2
  - job_name: podMonitor/default/kaap-broker-pod-monitor/0
    honor_timestamps: true
    track_timestamps_staleness: false
    scrape_interval: 10s
    scrape_timeout: 10s
    scrape_protocols:
      - OpenMetricsText1.0.0
      - OpenMetricsText0.0.1
      - PrometheusText0.0.4
    scrape_classic_histograms: true
    metrics_path: metrics
    scheme: http
    enable_compression: true
    label_limit: 63
    label_name_length_limit: 511
    label_value_length_limit: 1023
    follow_redirects: true
    enable_http2: true
    relabel_configs:
      - source_labels: [job]
        separator: ;
        target_label: __tmp_prometheus_job_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_phase]
        separator: ;
        regex: (Failed|Succeeded)
        replacement: $1
        action: drop
      - source_labels: [__meta_kubernetes_pod_label_app, __meta_kubernetes_pod_labelpresent_app]
        separator: ;
        regex: (pulsar);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_cluster, __meta_kubernetes_pod_labelpresent_cluster]
        separator: ;
        regex: (pulsar);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_component, __meta_kubernetes_pod_labelpresent_component]
        separator: ;
        regex: (broker);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_container_port_number]
        separator: ;
        regex: "8080"
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_container_name]
        separator: ;
        target_label: container
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: pod
        replacement: $1
        action: replace
      - separator: ;
        target_label: job
        replacement: default/kaap-broker-pod-monitor
        action: replace
      - separator: ;
        target_label: endpoint
        replacement: "8080"
        action: replace
      - separator: ;
        regex: __meta_kubernetes_pod_label_(.+)
        replacement: $1
        action: labelmap
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: kubernetes_namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_component]
        separator: ;
        target_label: job
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: kubernetes_pod_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: instance
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_component]
        separator: ;
        target_label: application
        replacement: $1
        action: replace
      - source_labels: [__address__]
        separator: ;
        modulus: 1
        target_label: __tmp_hash
        replacement: $1
        action: hashmod
      - source_labels: [__tmp_hash]
        separator: ;
        regex: "0"
        replacement: $1
        action: keep
    http_sd_configs:
      - follow_redirects: false
        enable_http2: false
        refresh_interval: 30s
        url: http://ama-metrics-operator-targets.kube-system.svc.cluster.local/jobs/podMonitor%2Fdefault%2Fkaap-broker-pod-monitor%2F0/targets?collector_id=ama-metrics-664c787d8d-g4dd2
  - job_name: podMonitor/default/kaap-zookeeper-pod-monitor/0
    honor_timestamps: true
    track_timestamps_staleness: false
    scrape_interval: 10s
    scrape_timeout: 10s
    scrape_protocols:
      - OpenMetricsText1.0.0
      - OpenMetricsText0.0.1
      - PrometheusText0.0.4
    scrape_classic_histograms: true
    metrics_path: metrics
    scheme: http
    enable_compression: true
    label_limit: 63
    label_name_length_limit: 511
    label_value_length_limit: 1023
    follow_redirects: true
    enable_http2: true
    relabel_configs:
      - source_labels: [job]
        separator: ;
        target_label: __tmp_prometheus_job_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_phase]
        separator: ;
        regex: (Failed|Succeeded)
        replacement: $1
        action: drop
      - source_labels: [__meta_kubernetes_pod_label_app, __meta_kubernetes_pod_labelpresent_app]
        separator: ;
        regex: (pulsar);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_cluster, __meta_kubernetes_pod_labelpresent_cluster]
        separator: ;
        regex: (pulsar);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_component, __meta_kubernetes_pod_labelpresent_component]
        separator: ;
        regex: (zookeeper);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_container_port_number]
        separator: ;
        regex: "8000"
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_container_name]
        separator: ;
        target_label: container
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: pod
        replacement: $1
        action: replace
      - separator: ;
        target_label: job
        replacement: default/kaap-zookeeper-pod-monitor
        action: replace
      - separator: ;
        target_label: endpoint
        replacement: "8000"
        action: replace
      - separator: ;
        regex: __meta_kubernetes_pod_label_(.+)
        replacement: $1
        action: labelmap
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: kubernetes_namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_component]
        separator: ;
        target_label: job
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: kubernetes_pod_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: instance
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_component]
        separator: ;
        target_label: application
        replacement: $1
        action: replace
      - source_labels: [__address__]
        separator: ;
        modulus: 1
        target_label: __tmp_hash
        replacement: $1
        action: hashmod
      - source_labels: [__tmp_hash]
        separator: ;
        regex: "0"
        replacement: $1
        action: keep
    http_sd_configs:
      - follow_redirects: false
        enable_http2: false
        refresh_interval: 30s
        url: http://ama-metrics-operator-targets.kube-system.svc.cluster.local/jobs/podMonitor%2Fdefault%2Fkaap-zookeeper-pod-monitor%2F0/targets?collector_id=ama-metrics-664c787d8d-g4dd2
  - job_name: podMonitor/default/streamx-pod-monitor/0
    honor_timestamps: true
    track_timestamps_staleness: false
    scrape_interval: 10s
    scrape_timeout: 10s
    scrape_protocols:
      - OpenMetricsText1.0.0
      - OpenMetricsText0.0.1
      - PrometheusText0.0.4
    scrape_classic_histograms: true
    metrics_path: /q/metrics
    scheme: http
    enable_compression: true
    label_limit: 63
    label_name_length_limit: 511
    label_value_length_limit: 1023
    follow_redirects: true
    enable_http2: true
    relabel_configs:
      - source_labels: [job]
        separator: ;
        target_label: __tmp_prometheus_job_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_phase]
        separator: ;
        regex: (Failed|Succeeded)
        replacement: $1
        action: drop
      - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_managed_by, __meta_kubernetes_pod_labelpresent_app_kubernetes_io_managed_by]
        separator: ;
        regex: (streamx-delivery-controller|streamx-processing-controller|streamx-ingestion-controller);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_component, __meta_kubernetes_pod_labelpresent_app_kubernetes_io_component]
        separator: ;
        regex: (delivery|processing|ingestion);true
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_container_port_number]
        separator: ;
        regex: "8080"
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_container_name]
        separator: ;
        target_label: container
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: pod
        replacement: $1
        action: replace
      - separator: ;
        target_label: job
        replacement: default/streamx-pod-monitor
        action: replace
      - separator: ;
        target_label: endpoint
        replacement: "8080"
        action: replace
      - separator: ;
        regex: __meta_kubernetes_pod_label_(.+)
        replacement: $1
        action: labelmap
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        target_label: kubernetes_namespace
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_instance]
        separator: ;
        target_label: job
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: kubernetes_pod_name
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_name]
        separator: ;
        target_label: instance
        replacement: $1
        action: replace
      - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_instance]
        separator: ;
        target_label: application
        replacement: $1
        action: replace
      - source_labels: [__address__]
        separator: ;
        modulus: 1
        target_label: __tmp_hash
        replacement: $1
        action: hashmod
      - source_labels: [__tmp_hash]
        separator: ;
        regex: "0"
        replacement: $1
        action: keep
    http_sd_configs:
      - follow_redirects: false
        enable_http2: false
        refresh_interval: 30s
        url: http://ama-metrics-operator-targets.kube-system.svc.cluster.local/jobs/podMonitor%2Fdefault%2Fstreamx-pod-monitor%2F0/targets?collector_id=ama-metrics-664c787d8d-g4dd2
  - job_name: acstor-capacity-provisioner
    honor_labels: true
    honor_timestamps: true
    track_timestamps_staleness: false
    scrape_interval: 30s
    scrape_timeout: 10s
    scrape_protocols:
      - OpenMetricsText1.0.0
      - OpenMetricsText0.0.1
      - PrometheusText0.0.4
    scrape_classic_histograms: true
    metrics_path: /metrics
    scheme: http
    enable_compression: true
    follow_redirects: true
    enable_http2: true
    relabel_configs:
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        regex: acstor
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_name, __meta_kubernetes_pod_label_app_kubernetes_io_component]
        separator: ;
        regex: capacity-provisioner;capacity-provisoner
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_container_port_name]
        separator: ;
        regex: metrics
        replacement: $1
        action: keep
    metric_relabel_configs:
      - source_labels: [__name__]
        separator: ;
        regex: '|storage_pool_ready_state|storage_pool_capacity_used_bytes|storage_pool_capacity_provisioned_bytes|storage_pool_snapshot_capacity_reserved_bytes'
        replacement: $1
        action: keep
    http_sd_configs:
      - follow_redirects: false
        enable_http2: false
        refresh_interval: 30s
        url: http://ama-metrics-operator-targets.kube-system.svc.cluster.local/jobs/acstor-capacity-provisioner/targets?collector_id=ama-metrics-664c787d8d-g4dd2
  - job_name: acstor-metrics-exporter
    honor_labels: true
    honor_timestamps: true
    track_timestamps_staleness: false
    scrape_interval: 30s
    scrape_timeout: 10s
    scrape_protocols:
      - OpenMetricsText1.0.0
      - OpenMetricsText0.0.1
      - PrometheusText0.0.4
    scrape_classic_histograms: true
    metrics_path: /metrics
    scheme: http
    enable_compression: true
    follow_redirects: true
    enable_http2: true
    relabel_configs:
      - source_labels: [__meta_kubernetes_namespace]
        separator: ;
        regex: acstor
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_name, __meta_kubernetes_pod_label_app_kubernetes_io_component]
        separator: ;
        regex: metrics-exporter;monitor
        replacement: $1
        action: keep
      - source_labels: [__meta_kubernetes_pod_container_port_name]
        separator: ;
        regex: metrics
        replacement: $1
        action: keep
    metric_relabel_configs:
      - source_labels: [__name__]
        separator: ;
        regex: '|disk_pool_ready_state|disk_read_operations_completed_total|disk_write_operations_completed_total|disk_read_operations_time_seconds_total|disk_write_operations_time_seconds_total|disk_errors_total|disk_read_bytes_total|disk_written_bytes_total|disk_readonly_errors_gauge'
        replacement: $1
        action: keep
    http_sd_configs:
      - follow_redirects: false
        enable_http2: false
        refresh_interval: 30s
        url: http://ama-metrics-operator-targets.kube-system.svc.cluster.local/jobs/acstor-metrics-exporter/targets?collector_id=ama-metrics-664c787d8d-g4dd2